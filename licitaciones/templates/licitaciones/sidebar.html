{% load static %}

<!-- CSS específico para sidebar -->
<link rel="stylesheet" href="{% static 'licitaciones/sidebar.css' %}">

<!-- Barra lateral -->
<div class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-user">
            <span class="sidebar-user-icon">👤</span>
            <span class="sidebar-user-name">
                {% if operador_sidebar_nombre %}
                    {{ operador_sidebar_nombre }}
                {% elif request.user.first_name or request.user.last_name %}
                    {{ request.user.first_name }} {{ request.user.last_name }}
                {% else %}
                    {{ request.user.username|default:'Operador' }}
                {% endif %}
            </span>
        </div>
        <a href="{% url 'logout' %}" class="sidebar-logout" title="Cerrar sesión">⏻ Cerrar sesión</a>
    </div>    <nav class="sidebar-nav">
        {% if es_admin %}
            <a href="{% url 'gestion_licitaciones' %}" class="sidebar-link">🏠 Panel principal</a>
        {% elif es_operador %}
            <a href="{% url 'vista_operador' %}" class="sidebar-link">🏠 Panel principal</a>
        {% elif es_operador_manual %}
            <a href="{% url 'vista_operador_manual' %}" class="sidebar-link">🏠 Panel principal</a>
        {% else %}
            <a href="#" class="sidebar-link">🏠 Panel principal</a>
        {% endif %}
        {% if es_admin %}
        <a href="{% url 'estadisticas' %}" class="sidebar-link">📊 Estadísticas</a>
        <a href="{% url 'calendario_actividad' %}" class="sidebar-link">📅 Calendario de Actividad</a>
        {% endif %}
    </nav>
    
    <div class="sidebar-spacer"></div>
    
    {% if es_admin %}
    <!-- Botón de notificaciones solo para admin -->
    <div class="sidebar-notificaciones">
        <button class="notificaciones-btn-sidebar" id="notificacionesToggle">
            <span class="notificaciones-icono">🔔</span>
            <span class="notificaciones-texto">Notificaciones</span>
            <span class="notificaciones-badge" id="notificacionesBadge" style="display: none;">0</span>
        </button>
    </div>
    {% endif %}
    
    <div id="sidebar-clock" class="sidebar-clock">
        <span id="clock-time">--:--:--</span><br>
        <span id="clock-date">--/--/----</span>
    </div>
</div>
<script>
    // Error de django, funciona correctamente...
    window.esAdmin = {% if es_admin %}true{% else %}false{% endif %};
</script>
<script src="{% static 'licitaciones/sidebar.js' %}"></script>
